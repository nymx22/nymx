<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>basement</title>
    <link rel="icon" type="image/png" href="../assets/images/fav_icon.png">
    <link rel="stylesheet" href="https://use.typekit.net/pew7esm.css">
    <link rel="stylesheet" href="../style/main.css" />
    <link rel="stylesheet" href="../style/basement/layout.css" />
    <link rel="stylesheet" href="../style/basement/wall.css" />
    <link rel="stylesheet" href="../style/basement/floor.css" />
    <link rel="stylesheet" href="../style/basement/pebbles.css" />
    <link rel="stylesheet" href="../style/basement/glitch.css" />
    <link rel="stylesheet" href="../style/basement/vignette.css" />
    <link rel="stylesheet" href="../style/basement/cursor.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
  </head>
  <body>
    <div class="custom-cursor">
      <img src="../assets/gif/cursor.gif" alt="cursor">
    </div>
    
    <!-- Background sections -->
    <div class="wall-section"></div>
    <div class="floor-section"></div>
    
    <!-- Snow glitch overlay -->
    <div id="basement-glitch-canvas"></div>
    
    <!-- White vignette overlay -->
    <div class="vignette-overlay"></div>
    
    <div class="basement-content">
      <a href="../index.html" class="back-link">return</a>
    </div>
    
    <script type="module">
      import { initPebbleFloor } from '../js/lib/desktop/pebbleFloor.js';
      
      // Initialize custom cursor
      const customCursor = document.querySelector('.custom-cursor');
      
      document.addEventListener('mousemove', (e) => {
        customCursor.style.setProperty('--mouse-x', `${e.clientX - 32}px`);
        customCursor.style.setProperty('--mouse-y', `${e.clientY - 32}px`);
      }, { passive: true });
      
      // Initialize pebble floor
      window.addEventListener('load', () => {
        initPebbleFloor();
      });
    </script>
    
    <script type="module">
      import { pureSnow } from '../js/effects/glitch/pureSnow.js';
      
      // Initialize p5 sketch for snow glitch on entire page
      const sketch = (p) => {
        p.setup = () => {
          const canvas = p.createCanvas(p.windowWidth, p.windowHeight);
          canvas.parent('basement-glitch-canvas');
          p.pixelDensity(1);
        };
        
        p.draw = () => {
          pureSnow(p);
        };
        
        p.windowResized = () => {
          p.resizeCanvas(p.windowWidth, p.windowHeight);
        };
      };
      
      new p5(sketch);
    </script>
    
  </body>
</html>

